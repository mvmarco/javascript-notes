{"id":"script.js","dependencies":[{"name":"/home/mvmarco/code/mvmarco/javascript-notes/exercises/75 - CORS and Recipes/package.json","includedInParent":true,"mtime":1613924774279}],"generated":{"js":"const baseEndpoint = 'http://www.recipepuppy.com/api'; // if you check the link, on top of the JSON viewer you see how the ?q= is built (the query)\n\nasync function fetchRecipes(query) {\n  const res = await fetch(`${baseEndpoint}?q=${query}`);\n  const data = await res.json();\n  return data;\n}\n\nfetchRecipes('pizza'); // here you populate the fetchRecipes. But we do get an error\n\n/* \n  the browser blocked the fetchRecipes, throwing an error saying \"No access controll allow origin - \n  origin null\"\n  \n  because of CORS: Cross Origin Resource Sharing.\n  \n  CROSS ORIGIN (DOMAIN NAMES): \n\n  mvmarco.com (my website)\n  ðŸ‘†\n  NO NO NO (by default you are not allowed to share data between origins/domain names)\n  ðŸ‘‡\n  facebook.com or danskebank.dk or recipes.com\n\n  you are allowed to share data from github.com to github.com/about. You are allowed to grab data from \n  other parts of your website. But as soon as you go \"cross origin\" from one domain name to another\n  domain name then you start getting in trouble. Because there are security issues in the browser.\n  Like for instance if you are trying to get data from a bank from your personal website is kind of\n  a security issue. By default wesites cannot talk from one domain name to another domain name.\n\n  if I wanna take some recipes from a website and put it on my own, we need to be able to talk from\n  the recipe website to mine. What needs to happen is that the recipe website has to implent something\n  called a \"CORS policy\". Which something that must happen on the server, nothing that you can do in\n  the browser. The \"CORS policy\" says something like okay, mvmarco.com, is allowed to ask for data and\n  we will return it, that is safe. So basically the recipe website has to say \"okay these are the domain\n  names that are allow to transfer data from my website to theirs\". This has to happen on the server of\n  the person that has the data. \n\n  from the error we get, \"No access controll allow origin - origin null\" it is because their server\n  cannot find our domain. Since we open the file locally on the browser. We need to open a server\n\n  after we open a server with: \"npm install parcel-bundler\" and \"npm run start\"\n  we may run in a common error, not CORS related, saying: \"Uncaught ReferenceError: \n  regeneratorRuntime is not defined\". \n\n  \"regeneratorRuntime\" is this thing called: \"babel\", what is does is taking your \n  JavaScript with things like \"async await or backticks or fetch\" (which are relatively new\n  to JS and sometimes browser that are old do not know about those things) and transpile or\n  convert your code from our modern JS to the version that are runnable to the older browser.\n  but in order to avoid to do it so babel can read it properly, we could go to our package.json\n  and put after the } a comma: like this: },\n  \"browserslist\": [\"last 1 chrome versions\"]\n\n  what it does is tricking babel that you are supporting the latest and greatest and then\n  there is no need to transpile. Another thing you can do if you still have issues kill the\n  server. go to to delete \"cache\" and \"dist\" and run again the npm start.\n\n  but now we get: \"localhost/:1 Access to fetch at 'http://www.recipepuppy.com/api?q=pizza'\n  from origin 'http://localhost:1234' has been blocked by CORS policy:\n  No 'Access-Control-Allow-Origin' header is present on the requested resource. \n  If an opaque response serves your needs, set the request's mode to 'no-cors' to fetch \n  the resource with CORS disabled.\"\n\n  this new ERROR is not anymore that the origin is null but that the origin is now\n  blocked. Like the recipe website is saying \"you are not suppose to use this in the\n  browser\". The solution should be on their website solutions. but it is not. the idea\n  is that if they do not have a CORS policy on browsers, but they from their website\n  have an \"iphone app\" so supposely you can run this from the phone. SO the idea is that\n  you if you amde a request from anything other than a browser it works. The solution is\n  that instead of going directly from: \"localhost\" to \"recipepuppy\" we put in the middle\n  a \"proxy\":\n  \n  localhost (send data to the proxy)\n  ðŸ‘†\n  ðŸ‘‡\n  PROXY (will make a server side request) (receive data from the recipe and send it back to\n        the localhot)\n  ðŸ‘†\n  ðŸ‘‡\n  recipepuppy (say it is all good and send back the data to the proxy)\n\n  you can either build up an entire server that handle your request yourself or\n  if it is something silly like this example, where there is nothing sensitive\n  we use something called CORS PROXY which is something that people provided to you\n  \n*/"},"sourceMaps":{"js":{"mappings":[{"generated":{"line":1,"column":0},"source":"script.js","original":{"line":1,"column":0}},{"name":"baseEndpoint","generated":{"line":1,"column":6},"source":"script.js","original":{"line":1,"column":6}},{"generated":{"line":1,"column":18},"source":"script.js","original":{"line":1,"column":18}},{"generated":{"line":1,"column":21},"source":"script.js","original":{"line":1,"column":21}},{"generated":{"line":1,"column":53},"source":"script.js","original":{"line":1,"column":0}},{"generated":{"line":1,"column":55},"source":"script.js","original":{"line":3,"column":0}},{"generated":{"line":3,"column":0},"source":"script.js","original":{"line":4,"column":0}},{"name":"fetchRecipes","generated":{"line":3,"column":15},"source":"script.js","original":{"line":4,"column":15}},{"generated":{"line":3,"column":27},"source":"script.js","original":{"line":4,"column":0}},{"name":"query","generated":{"line":3,"column":28},"source":"script.js","original":{"line":4,"column":28}},{"generated":{"line":3,"column":33},"source":"script.js","original":{"line":4,"column":0}},{"generated":{"line":3,"column":35},"source":"script.js","original":{"line":4,"column":35}},{"generated":{"line":4,"column":0},"source":"script.js","original":{"line":5,"column":2}},{"name":"res","generated":{"line":4,"column":8},"source":"script.js","original":{"line":5,"column":8}},{"generated":{"line":4,"column":11},"source":"script.js","original":{"line":5,"column":11}},{"generated":{"line":4,"column":14},"source":"script.js","original":{"line":5,"column":14}},{"name":"fetch","generated":{"line":4,"column":20},"source":"script.js","original":{"line":5,"column":20}},{"generated":{"line":4,"column":25},"source":"script.js","original":{"line":5,"column":25}},{"generated":{"line":4,"column":26},"source":"script.js","original":{"line":5,"column":27}},{"name":"baseEndpoint","generated":{"line":4,"column":29},"source":"script.js","original":{"line":5,"column":29}},{"generated":{"line":4,"column":41},"source":"script.js","original":{"line":5,"column":42}},{"name":"query","generated":{"line":4,"column":47},"source":"script.js","original":{"line":5,"column":47}},{"generated":{"line":4,"column":52},"source":"script.js","original":{"line":5,"column":53}},{"generated":{"line":4,"column":54},"source":"script.js","original":{"line":5,"column":25}},{"generated":{"line":4,"column":55},"source":"script.js","original":{"line":5,"column":2}},{"generated":{"line":5,"column":0},"source":"script.js","original":{"line":6,"column":2}},{"name":"data","generated":{"line":5,"column":8},"source":"script.js","original":{"line":6,"column":8}},{"generated":{"line":5,"column":12},"source":"script.js","original":{"line":6,"column":12}},{"generated":{"line":5,"column":15},"source":"script.js","original":{"line":6,"column":15}},{"name":"res","generated":{"line":5,"column":21},"source":"script.js","original":{"line":6,"column":21}},{"generated":{"line":5,"column":24},"source":"script.js","original":{"line":6,"column":24}},{"name":"json","generated":{"line":5,"column":25},"source":"script.js","original":{"line":6,"column":25}},{"generated":{"line":5,"column":29},"source":"script.js","original":{"line":6,"column":21}},{"generated":{"line":5,"column":31},"source":"script.js","original":{"line":6,"column":2}},{"generated":{"line":6,"column":0},"source":"script.js","original":{"line":7,"column":2}},{"name":"data","generated":{"line":6,"column":9},"source":"script.js","original":{"line":7,"column":9}},{"generated":{"line":6,"column":13},"source":"script.js","original":{"line":7,"column":2}},{"generated":{"line":7,"column":0},"source":"script.js","original":{"line":8,"column":1}},{"name":"fetchRecipes","generated":{"line":9,"column":0},"source":"script.js","original":{"line":10,"column":0}},{"generated":{"line":9,"column":12},"source":"script.js","original":{"line":10,"column":12}},{"generated":{"line":9,"column":13},"source":"script.js","original":{"line":10,"column":13}},{"generated":{"line":9,"column":20},"source":"script.js","original":{"line":10,"column":12}},{"generated":{"line":9,"column":21},"source":"script.js","original":{"line":10,"column":0}},{"generated":{"line":9,"column":23},"source":"script.js","original":{"line":10,"column":23}},{"generated":{"line":11,"column":0},"source":"script.js","original":{"line":12,"column":0}},{"generated":{"line":12,"column":0},"source":"script.js","original":{"line":13,"column":0}},{"generated":{"line":13,"column":0},"source":"script.js","original":{"line":14,"column":0}},{"generated":{"line":14,"column":0},"source":"script.js","original":{"line":15,"column":0}},{"generated":{"line":15,"column":0},"source":"script.js","original":{"line":16,"column":0}},{"generated":{"line":16,"column":0},"source":"script.js","original":{"line":17,"column":0}},{"generated":{"line":17,"column":0},"source":"script.js","original":{"line":18,"column":0}},{"generated":{"line":18,"column":0},"source":"script.js","original":{"line":19,"column":0}},{"generated":{"line":19,"column":0},"source":"script.js","original":{"line":20,"column":0}},{"generated":{"line":20,"column":0},"source":"script.js","original":{"line":21,"column":0}},{"generated":{"line":21,"column":0},"source":"script.js","original":{"line":22,"column":0}},{"generated":{"line":22,"column":0},"source":"script.js","original":{"line":23,"column":0}},{"generated":{"line":23,"column":0},"source":"script.js","original":{"line":24,"column":0}},{"generated":{"line":24,"column":0},"source":"script.js","original":{"line":25,"column":0}},{"generated":{"line":25,"column":0},"source":"script.js","original":{"line":26,"column":0}},{"generated":{"line":26,"column":0},"source":"script.js","original":{"line":27,"column":0}},{"generated":{"line":27,"column":0},"source":"script.js","original":{"line":28,"column":0}},{"generated":{"line":28,"column":0},"source":"script.js","original":{"line":29,"column":0}},{"generated":{"line":29,"column":0},"source":"script.js","original":{"line":30,"column":0}},{"generated":{"line":30,"column":0},"source":"script.js","original":{"line":31,"column":0}},{"generated":{"line":31,"column":0},"source":"script.js","original":{"line":32,"column":0}},{"generated":{"line":32,"column":0},"source":"script.js","original":{"line":33,"column":0}},{"generated":{"line":33,"column":0},"source":"script.js","original":{"line":34,"column":0}},{"generated":{"line":34,"column":0},"source":"script.js","original":{"line":35,"column":0}},{"generated":{"line":35,"column":0},"source":"script.js","original":{"line":36,"column":0}},{"generated":{"line":36,"column":0},"source":"script.js","original":{"line":37,"column":0}},{"generated":{"line":37,"column":0},"source":"script.js","original":{"line":38,"column":0}},{"generated":{"line":38,"column":0},"source":"script.js","original":{"line":39,"column":0}},{"generated":{"line":39,"column":0},"source":"script.js","original":{"line":40,"column":0}},{"generated":{"line":40,"column":0},"source":"script.js","original":{"line":41,"column":0}},{"generated":{"line":41,"column":0},"source":"script.js","original":{"line":42,"column":0}},{"generated":{"line":42,"column":0},"source":"script.js","original":{"line":43,"column":0}},{"generated":{"line":43,"column":0},"source":"script.js","original":{"line":44,"column":0}},{"generated":{"line":44,"column":0},"source":"script.js","original":{"line":45,"column":0}},{"generated":{"line":45,"column":0},"source":"script.js","original":{"line":46,"column":0}},{"generated":{"line":46,"column":0},"source":"script.js","original":{"line":47,"column":0}},{"generated":{"line":47,"column":0},"source":"script.js","original":{"line":48,"column":0}},{"generated":{"line":48,"column":0},"source":"script.js","original":{"line":49,"column":0}},{"generated":{"line":49,"column":0},"source":"script.js","original":{"line":50,"column":0}},{"generated":{"line":50,"column":0},"source":"script.js","original":{"line":51,"column":0}},{"generated":{"line":51,"column":0},"source":"script.js","original":{"line":52,"column":0}},{"generated":{"line":52,"column":0},"source":"script.js","original":{"line":53,"column":0}},{"generated":{"line":53,"column":0},"source":"script.js","original":{"line":54,"column":0}},{"generated":{"line":54,"column":0},"source":"script.js","original":{"line":55,"column":0}},{"generated":{"line":55,"column":0},"source":"script.js","original":{"line":56,"column":0}},{"generated":{"line":56,"column":0},"source":"script.js","original":{"line":57,"column":0}},{"generated":{"line":57,"column":0},"source":"script.js","original":{"line":58,"column":0}},{"generated":{"line":58,"column":0},"source":"script.js","original":{"line":59,"column":0}},{"generated":{"line":59,"column":0},"source":"script.js","original":{"line":60,"column":0}},{"generated":{"line":60,"column":0},"source":"script.js","original":{"line":61,"column":0}},{"generated":{"line":61,"column":0},"source":"script.js","original":{"line":62,"column":0}},{"generated":{"line":62,"column":0},"source":"script.js","original":{"line":63,"column":0}},{"generated":{"line":63,"column":0},"source":"script.js","original":{"line":64,"column":0}},{"generated":{"line":64,"column":0},"source":"script.js","original":{"line":65,"column":0}},{"generated":{"line":65,"column":0},"source":"script.js","original":{"line":66,"column":0}},{"generated":{"line":66,"column":0},"source":"script.js","original":{"line":67,"column":0}},{"generated":{"line":67,"column":0},"source":"script.js","original":{"line":68,"column":0}},{"generated":{"line":68,"column":0},"source":"script.js","original":{"line":69,"column":0}},{"generated":{"line":69,"column":0},"source":"script.js","original":{"line":70,"column":0}},{"generated":{"line":70,"column":0},"source":"script.js","original":{"line":71,"column":0}},{"generated":{"line":71,"column":0},"source":"script.js","original":{"line":72,"column":0}},{"generated":{"line":72,"column":0},"source":"script.js","original":{"line":73,"column":0}},{"generated":{"line":73,"column":0},"source":"script.js","original":{"line":74,"column":0}},{"generated":{"line":74,"column":0},"source":"script.js","original":{"line":75,"column":0}},{"generated":{"line":75,"column":0},"source":"script.js","original":{"line":76,"column":0}},{"generated":{"line":76,"column":0},"source":"script.js","original":{"line":77,"column":0}},{"generated":{"line":77,"column":0},"source":"script.js","original":{"line":78,"column":0}},{"generated":{"line":78,"column":0},"source":"script.js","original":{"line":79,"column":0}},{"generated":{"line":79,"column":0},"source":"script.js","original":{"line":80,"column":0}},{"generated":{"line":80,"column":0},"source":"script.js","original":{"line":81,"column":0}},{"generated":{"line":81,"column":0},"source":"script.js","original":{"line":82,"column":0}},{"generated":{"line":82,"column":0},"source":"script.js","original":{"line":83,"column":0}},{"generated":{"line":83,"column":0},"source":"script.js","original":{"line":84,"column":0}},{"generated":{"line":84,"column":0},"source":"script.js","original":{"line":85,"column":0}},{"generated":{"line":85,"column":0},"source":"script.js","original":{"line":86,"column":0}},{"generated":{"line":86,"column":0},"source":"script.js","original":{"line":87,"column":0}}],"sources":{"script.js":"const baseEndpoint = 'http://www.recipepuppy.com/api';\n\n// if you check the link, on top of the JSON viewer you see how the ?q= is built (the query)\nasync function fetchRecipes(query) {\n  const res = await fetch(`${baseEndpoint}?q=${query}`);\n  const data = await res.json();\n  return data;\n}\n\nfetchRecipes('pizza'); // here you populate the fetchRecipes. But we do get an error\n\n/* \n  the browser blocked the fetchRecipes, throwing an error saying \"No access controll allow origin - \n  origin null\"\n  \n  because of CORS: Cross Origin Resource Sharing.\n  \n  CROSS ORIGIN (DOMAIN NAMES): \n\n  mvmarco.com (my website)\n  ðŸ‘†\n  NO NO NO (by default you are not allowed to share data between origins/domain names)\n  ðŸ‘‡\n  facebook.com or danskebank.dk or recipes.com\n\n  you are allowed to share data from github.com to github.com/about. You are allowed to grab data from \n  other parts of your website. But as soon as you go \"cross origin\" from one domain name to another\n  domain name then you start getting in trouble. Because there are security issues in the browser.\n  Like for instance if you are trying to get data from a bank from your personal website is kind of\n  a security issue. By default wesites cannot talk from one domain name to another domain name.\n\n  if I wanna take some recipes from a website and put it on my own, we need to be able to talk from\n  the recipe website to mine. What needs to happen is that the recipe website has to implent something\n  called a \"CORS policy\". Which something that must happen on the server, nothing that you can do in\n  the browser. The \"CORS policy\" says something like okay, mvmarco.com, is allowed to ask for data and\n  we will return it, that is safe. So basically the recipe website has to say \"okay these are the domain\n  names that are allow to transfer data from my website to theirs\". This has to happen on the server of\n  the person that has the data. \n\n  from the error we get, \"No access controll allow origin - origin null\" it is because their server\n  cannot find our domain. Since we open the file locally on the browser. We need to open a server\n\n  after we open a server with: \"npm install parcel-bundler\" and \"npm run start\"\n  we may run in a common error, not CORS related, saying: \"Uncaught ReferenceError: \n  regeneratorRuntime is not defined\". \n\n  \"regeneratorRuntime\" is this thing called: \"babel\", what is does is taking your \n  JavaScript with things like \"async await or backticks or fetch\" (which are relatively new\n  to JS and sometimes browser that are old do not know about those things) and transpile or\n  convert your code from our modern JS to the version that are runnable to the older browser.\n  but in order to avoid to do it so babel can read it properly, we could go to our package.json\n  and put after the } a comma: like this: },\n  \"browserslist\": [\"last 1 chrome versions\"]\n\n  what it does is tricking babel that you are supporting the latest and greatest and then\n  there is no need to transpile. Another thing you can do if you still have issues kill the\n  server. go to to delete \"cache\" and \"dist\" and run again the npm start.\n\n  but now we get: \"localhost/:1 Access to fetch at 'http://www.recipepuppy.com/api?q=pizza'\n  from origin 'http://localhost:1234' has been blocked by CORS policy:\n  No 'Access-Control-Allow-Origin' header is present on the requested resource. \n  If an opaque response serves your needs, set the request's mode to 'no-cors' to fetch \n  the resource with CORS disabled.\"\n\n  this new ERROR is not anymore that the origin is null but that the origin is now\n  blocked. Like the recipe website is saying \"you are not suppose to use this in the\n  browser\". The solution should be on their website solutions. but it is not. the idea\n  is that if they do not have a CORS policy on browsers, but they from their website\n  have an \"iphone app\" so supposely you can run this from the phone. SO the idea is that\n  you if you amde a request from anything other than a browser it works. The solution is\n  that instead of going directly from: \"localhost\" to \"recipepuppy\" we put in the middle\n  a \"proxy\":\n  \n  localhost (send data to the proxy)\n  ðŸ‘†\n  ðŸ‘‡\n  PROXY (will make a server side request) (receive data from the recipe and send it back to\n        the localhot)\n  ðŸ‘†\n  ðŸ‘‡\n  recipepuppy (say it is all good and send back the data to the proxy)\n\n  you can either build up an entire server that handle your request yourself or\n  if it is something silly like this example, where there is nothing sensitive\n  we use something called CORS PROXY which is something that people provided to you\n  \n*/\n"},"lineCount":null}},"error":null,"hash":"3c7ebbaaa5d4b8a03cfa9629531ad129","cacheData":{"env":{}}}